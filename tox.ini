[tox]
skipsdist = True
envlist = py{37,38,39},py{37,38,39}-ci

[testenv]
deps =
  -rdev_requirements.txt
  -e.
commands = pytest {posargs}
passenv = *
allowlist_externals =
  /bin/sh
  az

[testenv:py{37,38,39}-ci]
commands_pre =
  az login --service-principal --username="{env:DBT_AZURE_SP_NAME:}" --password="{env:DBT_AZURE_SP_SECRET:}" --tenant="{env:DBT_AZURE_TENANT:}"
